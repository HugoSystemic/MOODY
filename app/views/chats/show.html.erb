<div class="container chats-container">
  <div id="<%= dom_id(@chat, :header) %>" class="chat-header">
    <h2><%= @chat.title %></h2>

    <%= button_to toggle_favorite_chat_path(@chat),
        method: :patch,
        class: "btn btn-link favorite-btn",
        data: { turbo_frame: "_top" },
        title: @chat.liked ? "Retirer des favoris" : "Ajouter aux favoris" do %>
      <i class="<%= @chat.liked ? "fas fa-star" : "far fa-star" %>"></i>
    <% end %>
  </div>

  <div class="chat-messages-container">
    <% if @messages.any? %>
      <% @messages.each do |message| %>
        <%= render 'messages/message_bubble', message: message %>
      <% end %>
    <% else %>
      <div class="text-center text-muted py-5">
        <p>Aucun message pour le moment. Commencez la conversation !</p>
      </div>
    <% end %>
  </div>

  <div class="chat-form-container">
    <%= render 'form', chat: @chat, message: @message %>
  </div>
</div>
